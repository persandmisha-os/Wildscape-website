<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Admin Review Panel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Admin Panel – Manage Reviews</h1>
  <div id="adminList"></div>

  <script>
  function loadAdminReviews() {
    fetch('reviews.json')
      .then(res => res.json())
      .then(data => {
        let html = "<table border='1' style='margin:auto;'><tr><th>User</th><th>Comment</th><th>Rating</th><th>Status</th><th>Action</th></tr>";
        data.reviews.forEach((r, i) => {
          const status = r.visible ? "Visible" : "Hidden";
          const action = r.visible
            ? `<button onclick="toggleReview(${i}, false)">Hide</button>`
            : `<button onclick="toggleReview(${i}, true)">Show</button>`;
          html += `<tr>
                    <td>${r.user}</td>
                    <td>${r.comment}</td>
                    <td>${r.rating}⭐</td>
                    <td>${status}</td>
                    <td>${action}</td>
                  </tr>`;
        });
        html += "</table>";
        document.getElementById("adminList").innerHTML = html;
      });
  }

  function toggleReview(id, visible) {
    fetch(`toggleReview.php?id=${id}&visible=${visible}`)
      .then(res => res.text())
      .then(msg => {
        alert(msg);
        loadAdminReviews();
      });
  }

  loadAdminReviews();
  </script>
</body>
</html>
